<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.blockb.beez.dao.HistoryDao">
	<insert id="chargeHistory" parameterType="map">
		INSERT INTO CHARGE VALUES(CHARGE_SEQ.NEXTVAL, (SELECT user_id FROM MEMBER WHERE wallet_address = #{userAddress}), #{amount}, SYSDATE, #{txHash})
    </insert>
	<!-- <insert id="chargeHistory" parameterType="com.blockb.beez.dto.HistoryDto">
		INSERT INTO CHARGE VALUES(CHARGE_SEQ.NEXTVAL, #{userId}, #{chargeAmount}, #{chargeInc}, #{txHash}, SYSDATE)
    </insert> -->
	<select id="historyList" resultType="com.blockb.beez.dto.HistoryDto">
		SELECT charge_amount chargeAmount, charge_Inc chargeInc, tx_Hash txHash, charge_date chargeDate
		FROM CHARGE
		WHERE user_id = #{userId}
		order by id desc
	</select>
</mapper>
